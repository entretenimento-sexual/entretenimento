/* src\styles\angular-material-bridge.css */
/* ============ Angular Material Overrides (globais) ============ */

/* mat-form-field (outline) – bordas, label, input, fundo */
.mat-mdc-form-field {
  --mdc-outlined-text-field-outline-color: var(--surface-border);
  --mdc-outlined-text-field-hover-outline-color: var(--surface-border);
  --mdc-outlined-text-field-focus-outline-color: var(--primary-color);

  --mdc-outlined-text-field-label-text-color: color-mix(in oklab, var(--text-color) 70%, transparent);
  --mdc-outlined-text-field-input-text-color: var(--text-color);
  --mdc-outlined-text-field-caret-color: var(--primary-color);

  background: var(--input-background);
}

.mdc-notched-outline__leading,
.mdc-notched-outline__notch,
.mdc-notched-outline__trailing {
  border-color: var(--surface-border) !important;
}

.mdc-text-field--focused .mdc-notched-outline__leading,
.mdc-text-field--focused .mdc-notched-outline__notch,
.mdc-text-field--focused .mdc-notched-outline__trailing {
  border-color: var(--primary-color) !important;
}

.mat-mdc-form-field mat-label {
  color: var(--text-color) !important;
}

.mat-mdc-input-element {
  color: var(--text-color) !important;
}

.mat-mdc-input-element::placeholder {
  color: color-mix(in oklab, var(--text-color) 55%, transparent);
}

/* mat-select trigger (texto + chevron) */
.mat-mdc-select {
  --mat-select-enabled-trigger-text-color: var(--text-color);
  --mat-select-focused-trigger-text-color: var(--text-color);
}

.mat-mdc-select-trigger,
.mat-mdc-select-value,
.mat-mdc-select-arrow {
  color: var(--text-color) !important;
}

/* mat-select panel (overlay) – opções como “Recentes/Online/…” */
.cdk-overlay-container .mat-mdc-select-panel,
.cdk-overlay-pane .mat-mdc-select-panel {
  background: var(--surface-color) !important;
  color: var(--text-color) !important;
  border: 1px solid var(--surface-border) !important;
}

.cdk-overlay-container .mat-mdc-select-panel .mat-mdc-option .mdc-list-item__primary-text,
.cdk-overlay-pane .mat-mdc-select-panel .mat-mdc-option .mdc-list-item__primary-text {
  color: var(--text-color) !important;
}

.cdk-overlay-container .mat-mdc-select-panel .mat-mdc-option:hover,
.cdk-overlay-pane .mat-mdc-select-panel .mat-mdc-option:hover {
  background: color-mix(in oklab, var(--primary-color) 18%, transparent) !important;
}

.cdk-overlay-container .mat-mdc-select-panel .mat-mdc-option.mdc-list-item--selected,
.cdk-overlay-pane .mat-mdc-select-panel .mat-mdc-option.mdc-list-item--selected {
  background: color-mix(in oklab, var(--primary-color) 24%, transparent) !important;
}

/* slide-toggle (“Só online”) – rótulo e estados */
.mat-mdc-slide-toggle .mdc-form-field {
  color: var(--text-color) !important;
}

.mat-mdc-slide-toggle {
  --mdc-switch-selected-track-color: color-mix(in oklab, var(--primary-color) 50%, transparent);
  --mdc-switch-selected-handle-color: var(--primary-color);
  --mdc-switch-selected-icon-color: #fff;
  --mdc-switch-unselected-track-color: var(--surface-border);
  --mdc-switch-unselected-handle-color: var(--text-color);
}

/* chips das métricas (X amigos / online / pedidos / bloqueados) */
.mat-mdc-chip,
.mat-mdc-chip .mdc-evolution-chip__text-label,
.mat-mdc-chip .mat-mdc-chip-action-label,
mat-chip,
mat-chip .mdc-evolution-chip__text-label {
  color: var(--text-color) !important;
}

mat-chip mat-icon,
.mat-mdc-chip mat-icon {
  color: var(--text-color) !important;
}

/* Painel do menu (overlay) com classe aplicada via `class="menu-requests-panel"` */
.cdk-overlay-pane .mat-mdc-menu-panel.menu-requests-panel {
  min-width: 360px;
  max-width: 420px;
  border-radius: 12px;
  background: var(--surface-color);
  color: var(--text-color);
  border: 1px solid var(--surface-border);
  box-shadow: var(--box-shadow);
  overflow: hidden;
}

.cdk-overlay-pane .mat-mdc-menu-panel.menu-requests-panel .mat-mdc-menu-content {
  padding: 8px 8px 10px;
  font-size: .95rem;
  line-height: 1.25;
  max-height: min(70vh, 440px);
  overflow: auto;
}

/* Seus itens custom dentro do menu */
.menu-requests-panel .req {
  display: grid;
  grid-template-columns: 36px 1fr;
  gap: .65rem;
  align-items: start;
  padding: .5rem;
  border-radius: .5rem;
}

.menu-requests-panel .req:hover {
  background: var(--header-hover-bg);
}

.menu-requests-panel .avatar {
  width: 36px;
  height: 36px;
  border-radius: 9999px;
  overflow: hidden;
  border: 1px solid var(--surface-border);
  display: grid;
  place-items: center;
}

.menu-requests-panel .avatar img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.menu-requests-panel .name {
  font-weight: 600;
  line-height: 1.2;
}

.menu-requests-panel .msg {
  font-size: .875rem;
  opacity: .9;
  margin-top: 2px;
}

.menu-requests-panel .acts {
  display: inline-flex;
  gap: .25rem;
  margin-top: .35rem;
}

.menu-requests-panel .acts button mat-icon {
  font-size: 18px;
}

html.dark-mode .cdk-overlay-pane .mat-mdc-menu-panel.menu-requests-panel {
  box-shadow: 0 8px 28px rgba(0, 0, 0, .5);
}

/* ultima alteração em 18OUT2025, se der ruim excluir daqui pra baixo que tá trank */
/* Tabs – contraste e foco */
.mat-mdc-tab .mdc-tab__text-label {
  color: var(--text-color) !important;
}

.mat-mdc-tab.mdc-tab--active .mdc-tab__text-label {
  color: var(--primary-color) !important;
}

.mat-mdc-tab .mdc-tab-indicator__content--underline {
  border-color: var(--surface-border) !important;
}

.mat-mdc-tab.mdc-tab--active .mdc-tab-indicator__content--underline {
  border-color: var(--primary-color) !important;
}

.mdc-tab:focus-visible {
  outline: var(--focus-ring);
  outline-offset: var(--focus-offset);
}


/* ==== ESCOPO: só o seu diálogo (via panelClass) ==== */
.cdk-overlay-pane.send-request-dialog-panel .mat-mdc-dialog-container {
  /* força tokens do dialog neste container */
  --mat-dialog-container-color: var(--surface-color) !important;
  --mat-dialog-subhead-color: var(--text-color) !important;
  --mat-dialog-supporting-text-color: color-mix(in oklab, var(--text-color) 75%, transparent) !important;
  background: var(--surface-color) !important;
  color: var(--text-color) !important;
}

/* conteúdo, divider e ícones seguem o tema */
.cdk-overlay-pane.send-request-dialog-panel .mat-mdc-dialog-content,
.cdk-overlay-pane.send-request-dialog-panel .mat-mdc-dialog-actions {
  background: var(--surface-color) !important;
  color: var(--text-color) !important;
}

.cdk-overlay-pane.send-request-dialog-panel mat-divider {
  border-top-color: var(--surface-border) !important;
}

.cdk-overlay-pane.send-request-dialog-panel mat-icon {
  color: var(--text-color) !important;
}

/* Form field (appearance="fill") – LIGHT */
.cdk-overlay-pane.send-request-dialog-panel .mat-mdc-form-field.mat-mdc-form-field-appearance-fill {
  --mdc-filled-text-field-container-color: var(--input-background) !important;
  --mdc-filled-text-field-input-text-color: var(--text-color) !important;
  --mdc-filled-text-field-label-text-color: color-mix(in oklab, var(--text-color) 75%, transparent) !important;
  --mdc-filled-text-field-caret-color: var(--primary-color) !important;
  --mdc-filled-text-field-focus-active-indicator-color: var(--primary-color) !important;
  --mdc-filled-text-field-active-indicator-color: var(--surface-border) !important;
  --mdc-filled-text-field-hover-active-indicator-color: var(--surface-border) !important;
  --mat-form-field-subscript-text-color: color-mix(in oklab, var(--text-color) 70%, transparent) !important;
}

/* Label, input, placeholder, hints */
.cdk-overlay-pane.send-request-dialog-panel .mat-mdc-form-field mat-label,
.cdk-overlay-pane.send-request-dialog-panel .mat-mdc-input-element,
.cdk-overlay-pane.send-request-dialog-panel .mat-mdc-form-field .mat-mdc-form-field-icon-suffix,
.cdk-overlay-pane.send-request-dialog-panel .mat-mdc-form-field .mat-mdc-form-field-icon-prefix {
  color: var(--text-color) !important;
}

.cdk-overlay-pane.send-request-dialog-panel .mat-mdc-input-element::placeholder {
  color: color-mix(in oklab, var(--text-color) 55%, transparent) !important;
}

/* “Ctrl/⌘ + Enter para enviar” e “0/200” */
.cdk-overlay-pane.send-request-dialog-panel .mat-mdc-form-field-subscript-wrapper,
.cdk-overlay-pane.send-request-dialog-panel .mat-mdc-form-field-hint-wrapper {
  color: color-mix(in oklab, var(--text-color) 75%, transparent) !important;
}

/* Botões herdarem seu tema */
.cdk-overlay-pane.send-request-dialog-panel {
  --mat-sys-surface: var(--surface-color);
  --mat-sys-on-surface: var(--text-color);
  --mat-sys-primary: var(--primary-color);
  --mat-sys-on-primary: #fff;
  --mat-button-text-label-text-color: var(--primary-color);
}

/* ==== DARK: inversão explícita no MESMO container ==== */
html.dark-mode .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-dialog-container,
body.dark .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-dialog-container,
[data-theme="dark"] .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-dialog-container {
  --mat-dialog-container-color: color-mix(in oklab, var(--surface-color) 90%, black 10%) !important;
  --mat-dialog-subhead-color: var(--text-color) !important;
  --mat-dialog-supporting-text-color: color-mix(in oklab, var(--text-color) 90%, transparent) !important;
  background: color-mix(in oklab, var(--surface-color) 90%, black 10%) !important;
  color: var(--text-color) !important;
}

/* Form field em DARK (texto do textarea claro e legível) */
html.dark-mode .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-form-field.mat-mdc-form-field-appearance-fill,
body.dark .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-form-field.mat-mdc-form-field-appearance-fill,
[data-theme="dark"] .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-form-field.mat-mdc-form-field-appearance-fill {
  --mdc-filled-text-field-container-color: var(--input-background) !important;
  --mdc-filled-text-field-input-text-color: var(--text-color) !important;
  --mdc-filled-text-field-label-text-color: color-mix(in oklab, var(--text-color) 85%, transparent) !important;
  --mdc-filled-text-field-caret-color: var(--primary-color) !important;
  --mdc-filled-text-field-focus-active-indicator-color: var(--primary-color) !important;
  --mdc-filled-text-field-active-indicator-color: color-mix(in oklab, var(--text-color) 30%, transparent) !important;
  --mdc-filled-text-field-hover-active-indicator-color: color-mix(in oklab, var(--text-color) 36%, transparent) !important;
  --mat-form-field-subscript-text-color: color-mix(in oklab, var(--text-color) 90%, transparent) !important;
}

html.dark-mode .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-form-field mat-label,
html.dark-mode .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-input-element,
html.dark-mode .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-form-field .mat-mdc-form-field-icon-suffix,
html.dark-mode .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-form-field .mat-mdc-form-field-icon-prefix,
body.dark .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-form-field mat-label,
body.dark .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-input-element,
[data-theme="dark"] .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-input-element {
  color: var(--text-color) !important;
}

html.dark-mode .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-input-element::placeholder,
body.dark .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-input-element::placeholder,
[data-theme="dark"] .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-input-element::placeholder {
  color: color-mix(in oklab, var(--text-color) 72%, transparent) !important;
}

html.dark-mode .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-form-field-subscript-wrapper,
html.dark-mode .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-form-field-hint-wrapper {
  color: var(--text-color) !important;
}

/* ======================= */
/*  DARK FIX – TEXTAREA    */
/*  Força fundo do wrapper */
/* ======================= */

html.dark-mode .cdk-overlay-pane.send-request-dialog-panel,
body.dark .cdk-overlay-pane.send-request-dialog-panel,
[data-theme="dark"] .cdk-overlay-pane.send-request-dialog-panel {
  /* garante que o “surface” do dialog não caia no branco */
  --mdc-theme-surface: var(--surface-color) !important;
}

/* wrapper do filled (é ele que fica branco por fallback) */
html.dark-mode .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-text-field-wrapper.mdc-text-field.mdc-text-field--filled,
body.dark .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-text-field-wrapper.mdc-text-field.mdc-text-field--filled,
[data-theme="dark"] .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-text-field-wrapper.mdc-text-field.mdc-text-field--filled {
  background-color: var(--input-background) !important;
  /* ex.: #161b22 no seu tema */
  color: var(--text-color) !important;
  border-radius: 12px;
  /* opcional: casa com o card */
}

/* overlay de foco da filled (aquela “película” por cima) */
html.dark-mode .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-form-field .mat-mdc-form-field-focus-overlay,
body.dark .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-form-field .mat-mdc-form-field-focus-overlay,
[data-theme="dark"] .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-form-field .mat-mdc-form-field-focus-overlay {
  background-color: transparent !important;
}

/* linha de foco/ativo no filled */
html.dark-mode .cdk-overlay-pane.send-request-dialog-panel .mdc-line-ripple,
body.dark .cdk-overlay-pane.send-request-dialog-panel .mdc-line-ripple,
[data-theme="dark"] .cdk-overlay-pane.send-request-dialog-panel .mdc-line-ripple {
  border-color: var(--primary-color) !important;
}

/* texto digitado e placeholder (fica legível no fundo escuro) */
html.dark-mode .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-input-element,
body.dark .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-input-element,
[data-theme="dark"] .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-input-element {
  color: var(--text-color) !important;
  caret-color: var(--primary-color) !important;
}

html.dark-mode .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-input-element::placeholder,
body.dark .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-input-element::placeholder,
[data-theme="dark"] .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-input-element::placeholder {
  color: color-mix(in oklab, var(--text-color) 72%, transparent) !important;
}

/* hints (“Ctrl/⌘ + Enter…” e “0/200”) no dark */
html.dark-mode .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-form-field-subscript-wrapper,
html.dark-mode .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-form-field-hint-wrapper,
body.dark .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-form-field-subscript-wrapper,
body.dark .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-form-field-hint-wrapper,
[data-theme="dark"] .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-form-field-subscript-wrapper,
[data-theme="dark"] .cdk-overlay-pane.send-request-dialog-panel .mat-mdc-form-field-hint-wrapper {
  color: color-mix(in oklab, var(--text-color) 90%, transparent) !important;
}
