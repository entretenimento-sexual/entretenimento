<!-- src/app/header/navbar/navbar.component.html -->
<div class="navbar-with-links">
  <nav class="navbar" role="navigation" aria-label="Navega√ß√£o principal">
    <div class="navbar-container">
      <div class="navbar-header">
        <a routerLink="/" class="navbar-brand" routerLinkActive="active" #rlaHome="routerLinkActive"
          [attr.aria-current]="rlaHome.isActive ? 'page' : null">
          <app-logo class="navbar-logo"></app-logo>
          <span class="visually-hidden">P√°gina inicial</span>
        </a>

        <!-- aria-expanded idealmente deveria refletir um estado real (ex.: sidebar aberto) -->
        <button class="hamburger-btn" (click)="onToggleSidebar()" aria-label="Abrir menu lateral"
          aria-controls="app-sidebar" aria-expanded="false">
          &#9776;
        </button>
      </div>

      <ul class="navbar-menu" role="menubar">
        @if (isAuthenticated) {
        <li class="navbar-item" role="none">
          <a routerLink="/dashboard/principal" class="navbar-link" routerLinkActive="active"
            #rlaPrincipal="routerLinkActive" [attr.aria-current]="rlaPrincipal.isActive ? 'page' : null"
            role="menuitem">
            Principal
          </a>
        </li>

<!-- Quando alterei aqui funcionou corretamente. N√£o funciona e trava tudo-->
<li class="navbar-item" role="none"> <a routerLink="/meu-perfil" class="navbar-link" role="menuitem"> Meu Perfil </a>
</li>

        <li class="navbar-item" role="none">
          <a routerLink="/contato" class="navbar-link" routerLinkActive="active" #rlaContato="routerLinkActive"
            [attr.aria-current]="rlaContato.isActive ? 'page' : null" role="menuitem">
            Contato
          </a>
        </li>

        <!-- ‚úÖ Melhor acessibilidade: remove javascript:void(0) -->
        <li class="navbar-item" role="none">
          <button type="button" class="navbar-link as-button" (click)="logout()" role="menuitem">
            Sair
          </button>
        </li>
        }

        <li class="navbar-item" role="none">
          <a routerLink="/subscription-plan" class="navbar-link" routerLinkActive="active" #rlaPlanos="routerLinkActive"
            [attr.aria-current]="rlaPlanos.isActive ? 'page' : null" role="menuitem">
            Planos de Assinatura
          </a>
        </li>

        @if (!isAuthenticated) {
        <li class="navbar-item" role="none">
          <a routerLink="/espiar" class="navbar-link" routerLinkActive="active" #rlaEspiar="routerLinkActive"
            [attr.aria-current]="rlaEspiar.isActive ? 'page' : null" title="Acesso limitado ao site" role="menuitem">
            Espiar
          </a>
        </li>

        @if (!isLoginPage) {
        <li class="navbar-item" role="none">
          <a routerLink="/login" class="navbar-link" routerLinkActive="active" #rlaLogin="routerLinkActive"
            [attr.aria-current]="rlaLogin.isActive ? 'page' : null" title="J√° tem conta? Fa√ßa login" role="menuitem">
            Logar
          </a>
        </li>
        }

        <li class="navbar-item" role="none">
          <a routerLink="/register" class="navbar-link" routerLinkActive="active" #rlaRegister="routerLinkActive"
            [attr.aria-current]="rlaRegister.isActive ? 'page' : null" title="Clique aqui para criar uma conta"
            role="menuitem">
            Cadastre-se
          </a>
        </li>
        }

        @if (isAuthenticated) {
        <li class="navbar-item user-info" role="none">
          @if (photoURL) {
          <img [src]="photoURL" [alt]="'Foto de ' + nickname" class="user-photo" width="32" height="32" loading="lazy"
            decoding="async" referrerpolicy="no-referrer" />
          }
          <span class="user-name" aria-label="Usu√°rio autenticado: {{ nickname }}">{{ nickname }}</span>
        </li>
        }

        <li class="navbar-item" role="none">
          <button class="dark-toggle" (click)="toggleDarkMode()" aria-label="Alternar entre claro e escuro"
            [attr.aria-pressed]="isDarkMode() ? 'true' : 'false'" role="menuitem">
            {{ isDarkMode() ? 'üåô' : '‚òÄÔ∏è' }}
          </button>
        </li>

        <li class="navbar-item" role="none">
          <button class="contrast-toggle" (click)="toggleHighContrast()"
            [attr.aria-pressed]="isHighContrast() ? 'true' : 'false'" aria-label="Alternar alto contraste"
            role="menuitem">
            {{ isHighContrast() ? 'HC ON' : 'HC OFF' }}
          </button>
        </li>
      </ul>
    </div>
  </nav>
<!-- TODO(UX/ARCH): Separar header p√∫blico x privado.
  // - LinksInteraction N√ÉO deve ser instanciado em /login e /register (layout p√∫blico).
  // - Preferir *ngIf no template do header ou layouts separados (PublicLayout/PrivateLayout).
  // - Mesmo ocultando, manter gating interno no LinksInteraction (defesa em profundidade). -->

  <app-links-interaction id="app-sidebar"></app-links-interaction>
</div>

@if (isFree) {
<app-guest-banner></app-guest-banner>
}
