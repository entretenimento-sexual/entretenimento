<!-- src/app/layout/friend-management/friend-list-page/friend-list-page.component.html -->
<section class="friends-page" aria-labelledby="friends-page-title">
  <header class="friends-page__header">
    <h2 id="friends-page-title">Seus Amigos</h2>

    <div class="friends-toolbar" role="toolbar" aria-label="Ferramentas da lista de amigos">
      <mat-form-field appearance="outline" class="toolbar__field">
        <mat-label>Buscar</mat-label>
        <input matInput type="search" autocomplete="off" (input)="onQueryChange($any($event.target).value)"
          placeholder="Nome, apelido…">
      </mat-form-field>

      <mat-form-field appearance="outline" class="toolbar__field">
        <mat-label>Ordenar por</mat-label>
        <mat-select panelClass="friends-select-panel" [value]="sortBy()" (valueChange)="onSortChange($event)">
          <mat-option value="recent">Recentes</mat-option>
          <mat-option value="online">Online</mat-option>
          <mat-option value="distance">Distância</mat-option>
          <mat-option value="alpha">A–Z</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-slide-toggle class="toolbar__toggle" [checked]="filters().onlyOnline ?? false"
        (change)="onOnlyOnlineToggle($event.checked)">
        Só online
      </mat-slide-toggle>
    </div>

    <div class="friends-metrics" aria-label="Resumo">
      <mat-chip-set aria-label="Indicadores">
        <mat-chip>
          <mat-icon fontIcon="group" aria-hidden="true"></mat-icon>
          {{ friendsCount$ | async }} amigos
        </mat-chip>

        <mat-chip color="primary" selected>
          <mat-icon fontIcon="online_prediction" aria-hidden="true"></mat-icon>
          {{ onlineCount$ | async }} online
        </mat-chip>

        <mat-chip color="accent" selected>
          <mat-icon fontIcon="mail" aria-hidden="true"></mat-icon>
          {{ pendingRequestsCount$ | async }} pedidos
        </mat-chip>

        <mat-chip color="warn" selected>
          <mat-icon fontIcon="block" aria-hidden="true"></mat-icon>
          {{ blockedCount$ | async }} bloqueados
        </mat-chip>
      </mat-chip-set>
    </div>
  </header>

  <div class="friends-page__content">
    <div class="friends-scroll">
      <app-friend-cards [items]="(items$ | async) ?? []" [isLoading]="(loading$ | async) ?? false"
        [reachedEnd]="(reachedEnd$ | async) ?? false" [displayMode]="'full'" [sortBy]="sortBy()" [filters]="filters()">
      </app-friend-cards>

      <!-- Sentinela p/ paginação infinita -->
      <div #sentinel class="infinite-sentinel" aria-hidden="true"></div>
    </div>
  </div>
 </section>
