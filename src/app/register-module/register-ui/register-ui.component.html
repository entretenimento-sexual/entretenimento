<!-- src\app\register-module\register-ui\register-ui.component.html -->
<form *ngIf="form() as f" [formGroup]="f" (ngSubmit)="submitForm.emit()" class="form-ui">

  <app-nickname-field [form]="f"/>

  <!-- Campo Email -->
  <div class="input-group">
    <input type="email" formControlName="email" placeholder="E-mail válido" class="input-field"
      [readonly]="!nicknameValidado()" aria-label="Email" />
    <div
      *ngIf="emailValidado?.() && form()?.get('email')?.invalid && (form()?.get('email')?.touched || form()?.get('email')?.dirty)"
      class="alert alert-error">
      <small *ngIf="form()?.get('email')?.hasError('required')">E-mail obrigatório.</small>
      <small *ngIf="form()?.get('email')?.hasError('invalidEmail')">Formato inválido.</small>
    </div>
  </div>

  <!-- Campo Senha -->
  <div class="input-group">
    <input type="password" formControlName="password" placeholder="Senha segura" class="input-field"
      [readonly]="!emailValidado()" aria-label="Senha" />
    <div
      *ngIf="form()?.get('password')?.invalid && (form()?.get('password')?.touched || form()?.get('password')?.dirty)"
      class="alert alert-error">
      <small>Senha deve ter pelo menos 8 caracteres, incluindo maiúsculas, minúsculas e números.</small>
    </div>
  </div>

  <!-- Termos e Condições -->
  <div class="form-confirmation">
    <input type="checkbox" formControlName="aceitarTermos" id="termosCheckbox" />
    <label for="termosCheckbox">
      Eu aceito os <a (click)="openTerms.emit()">Termos de Uso</a> e a
      <a href="/politica-de-privacidade" target="_blank" rel="noopener noreferrer">Política de Privacidade</a>.
    </label>
  </div>

  <!-- Botão de Cadastro -->
  <div class="button-container">
    <button class="btn btn-primary" type="submit"
      [disabled]="form()?.invalid || !nicknameValidado() || !emailValidado() || isLoading() || isLockedOut()"
      aria-disabled="form()?.invalid || !nicknameValidado?.() || !emailValidado?.() || isLoading?.() || isLockedOut?.()">
      <span *ngIf="isLoading?.()">Carregando...</span>
      <span *ngIf="!isLoading?.() && !isLockedOut?.()">Cadastre-se</span>
      <span *ngIf="isLockedOut?.()">Bloqueado</span>
    </button>
  </div>
</form>

<app-form-success-message *ngIf="formSubmitted" [form]="form()"
  (resendEmail)="resendEmail.emit()"/>


<p class="login-link">Já tem uma conta? <a routerLink="/login">Faça login</a></p>
