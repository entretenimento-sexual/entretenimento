<!-- src/app/authentication/register-module/welcome/welcome.component.html -->
<div class="welcome-container">
  <header class="welcome-header">
    <h1>Confirme seu e-mail para comeÃ§ar</h1>
    <p class="subtitle">
      Enviamos um link de verificaÃ§Ã£o para <strong>{{ email || 'seu e-mail' }}</strong>.
      Assim que vocÃª confirmar, liberamos todos os recursos.
    </p>
  </header>

  <main class="welcome-content">
    <section class="welcome-card">
      <h2 class="card-title">
        Status:
        <span *ngIf="emailVerified; else notVerified" class="badge ok">verificado</span>
        <ng-template #notVerified><span class="badge warn">nÃ£o verificado</span></ng-template>
      </h2>

      <ol class="steps">
        <li>Abra sua caixa de entrada.</li>
        <li>Procure pelo e-mail â€œConfirme seu endereÃ§oâ€.</li>
        <li>Clique no botÃ£o do e-mail para confirmar.</li>
      </ol>

      <div *ngIf="message" class="alert alert-info" role="status" aria-live="polite">
        {{ message }}
      </div>

      <div class="actions">
        <button class="btn btn-primary" (click)="checkNow()" [disabled]="busy" [attr.aria-busy]="busy">
          {{ busy ? 'Checandoâ€¦' : 'JÃ¡ verifiquei â€” checar agora' }}
        </button>
        <button class="btn btn-secondary" (click)="resendVerificationEmail()" [disabled]="busy" [attr.aria-busy]="busy">
          {{ busy ? 'Reenviandoâ€¦' : 'Reenviar e-mail' }}
        </button>
        <button class="btn" (click)="proceedToDashboard()" [disabled]="busy">
          Continuar sem verificar
        </button>
      </div>
    </section>

    <!-- Onboarding opcional (colapsado) -->
    <details class="welcome-card details-optional">
      <summary>Quero adiantar meu perfil (opcional)</summary>

      <div class="optional-grid">
        <div>
          <label class="form-label">Identidade de gÃªnero (opcional)</label>
          <select class="input-field" [(ngModel)]="selectedGender" aria-label="Selecione seu gÃªnero">
            <option value="" disabled selected>Selecione seu gÃªnero (opcional)</option>
            <option *ngFor="let gender of validGenders" [value]="gender">{{ gender }}</option>
          </select>
        </div>

        <div>
          <label class="form-label">O que vocÃª gostaria de encontrar? (opcional)</label>
          <div class="checkbox-group">
            <label class="checkbox-item" *ngFor="let preference of validPreferences">
              <input type="checkbox" [(ngModel)]="selectedPreferencesMap[preference]" />
              {{ preference }}
            </label>
          </div>
        </div>
      </div>

      <div class="actions right">
        <button class="btn btn-primary" (click)="saveOptionalProfile()" [disabled]="savingOptional || busy"
          [attr.aria-busy]="savingOptional">
          {{ savingOptional ? 'Salvandoâ€¦' : 'Salvar preferÃªncias' }}
        </button>
      </div>
    </details>

    <!-- Sucesso pÃ³s-verificaÃ§Ã£o: CTA destacado, sem auto-redirect brusco -->
    <section *ngIf="emailVerified" class="welcome-card success-card">
      <h2 class="card-title">Tudo certo! ğŸ‰</h2>
      <p>Seu e-mail estÃ¡ verificado. VocÃª pode seguir para o painel quando quiser.</p>
      <div class="actions">
        <button class="btn btn-primary" (click)="proceedToDashboard()">Ir para o painel</button>
      </div>
    </section>
  </main>
</div>
